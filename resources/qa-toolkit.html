            // Create PDF-friendly version of content
            const pdfContent = document.createElement('div');
            pdfContent.className = 'pdf-content';
            pdfContent.style.padding = '20px';
            pdfContent.style.background = '#ffffff';
            pdfContent.style.color = '#333333';
            pdfContent.style.width = '794px'; // A4 width
            pdfContent.style.fontFamily = 'Arial, sans-serif';
            
            // Add company header
            const companyName = document.getElementById('company-name').value.trim() || 'VelocityQA';
            const companyTagline = document.getElementById('company-tagline').value.trim() || 'Professional QA testing for startups. We break your software so your users won\'t.';
            const headingColor = document.getElementById('heading-color').value || '#FF6B00';
            const subheadingColor = document.getElementById('subheading-color').value || '#20C5C6';
            
            const header = document.createElement('div');
            header.style.borderBottom = '1px solid #eee';
            header.style.paddingBottom = '10px';
            header.style.marginBottom = '20px';
            
            const headerTitle = document.createElement('h1');
            headerTitle.style.fontSize = '24px';
            headerTitle.style.color = headingColor;
            headerTitle.style.marginBottom = '5px';
            headerTitle.textContent = title;
            
            const headerCompany = document.createElement('div');
            headerCompany.style.fontSize = '14px';
            headerCompany.style.color = '#666';
            headerCompany.textContent = companyName;
            
            header.appendChild(headerTitle);
            header.appendChild(headerCompany);
            pdfContent.appendChild(header);
            
            // Format content
            const content = document.createElement('div');
            const lines = templateOutput.textContent.split('\n');
            
            lines.forEach(line => {
                if (line.startsWith('# ')) {
                    const h1 = document.createElement('h1');
                    h1.style.fontSize = '22px';
                    h1.style.color = headingColor;
                    h1.style.marginTop = '20px';
                    h1.style.marginBottom = '10px';
                    h1.textContent = line.substring(2);
                    content.appendChild(h1);
                } else if (line.startsWith('## ')) {
                    const h2 = document.createElement('h2');
                    h2.style.fontSize = '18px';
                    h2.style.color = subheadingColor;
                    h2.style.marginTop = '15px';
                    h2.style.marginBottom = '8px';
                    h2.textContent = line.substring(3);
                    content.appendChild(h2);
                } else if (line.startsWith('### ')) {
                    const h3 = document.createElement('h3');
                    h3.style.fontSize = '16px';
                    h3.style.color = subheadingColor;
                    h3.style.marginTop = '12px';
                    h3.style.marginBottom = '6px';
                    h3.textContent = line.substring(4);
                    content.appendChild(h3);
                } else if (line.startsWith('- [ ] ')) {
                    const item = document.createElement('div');
                    item.style.display = 'flex';
                    item.style.alignItems = 'flex-start';
                    item.style.marginBottom = '6px';
                    
                    const checkbox = document.createElement('span');
                    checkbox.style.marginRight = '8px';
                    checkbox.innerHTML = '☐';
                    
                    const text = document.createElement('span');
                    text.textContent = line.substring(6);
                    
                    item.appendChild(checkbox);
                    item.appendChild(text);
                    content.appendChild(item);
                } else if (line.startsWith('- ')) {
                    const item = document.createElement('div');
                    item.style.display = 'flex';
                    item.style.alignItems = 'flex-start';
                    item.style.marginBottom = '6px';
                    
                    const bullet = document.createElement('span');
                    bullet.style.marginRight = '8px';
                    bullet.innerHTML = '•';
                    
                    const text = document.createElement('span');
                    text.textContent = line.substring(2);
                    
                    item.appendChild(bullet);
                    item.appendChild(text);
                    content.appendChild(item);
                } else if (line.trim() === '---') {
                    const hr = document.createElement('hr');
                    hr.style.border = '0';
                    hr.style.borderTop = '1px solid #eee';
                    hr.style.margin = '20px 0';
                    content.appendChild(hr);
                } else if (line.trim() !== '') {
                    const p = document.createElement('p');
                    p.style.marginBottom = '8px';
                    p.style.lineHeight = '1.4';
                    
                    // Handle bold text
                    if (line.includes('**')) {
                        let text = line;
                        let parts = [];
                        let boldPattern = /\*\*(.*?)\*\*/g;
                        let match;
                        let lastIndex = 0;
                        
                        while ((match = boldPattern.exec(text)) !== null) {
                            // Text before the bold part
                            if (match.index > lastIndex) {
                                parts.push(document.createTextNode(text.substring(lastIndex, match.index)));
                            }
                            
                            // Bold part
                            const bold = document.createElement('strong');
                            bold.textContent = match[1];
                            parts.push(bold);
                            
                            lastIndex = match.index + match[0].length;
                        }
                        
                        // Remaining text
                        if (lastIndex < text.length) {
                            parts.push(document.createTextNode(text.substring(lastIndex)));
                        }
                        
                        // Add all parts to paragraph
                        parts.forEach(part => p.appendChild(part));
                    } else {
                        p.textContent = line;
                    }
                    
                    content.appendChild(p);
                } else {
                    // Empty line
                    const spacer = document.createElement('div');
                    spacer.style.height = '8px';
                    content.appendChild(spacer);
                }
            });
            
            pdfContent.appendChild(content);
            
            // Add footer
            const footer = document.createElement('div');
            footer.style.borderTop = '1px solid #eee';
            footer.style.paddingTop = '10px';
            footer.style.marginTop = '20px';
            footer.style.fontSize = '12px';
            footer.style.color = '#666';
            footer.style.textAlign = 'center';
            footer.textContent = `Generated by ${companyName} - ${companyTagline}`;
            pdfContent.appendChild(footer);
            
            // Hide the element
            pdfContent.style.position = 'absolute';
            pdfContent.style.left = '-9999px';
            document.body.appendChild(pdfContent);
            
            // Generate PDF
            html2canvas(pdfContent, {
                scale: 2,
                logging: false,
                useCORS: true,
                allowTaint: false,
                backgroundColor: '#ffffff'
            }).then(canvas => {
                document.body.removeChild(pdfContent);
                
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                const imgData = canvas.toDataURL('image/jpeg', 1.0);
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                const imgWidth = canvas.width;
                const imgHeight = canvas.height;
                const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight);
                const imgX = (pdfWidth - imgWidth * ratio) / 2;
                
                pdf.addImage(imgData, 'JPEG', imgX, 0, imgWidth * ratio, imgHeight * ratio);
                
                // Add footer with date and page number
                pdf.setFontSize(8);
                pdf.setTextColor(100, 100, 100);
                pdf.text(`Generated on ${new Date().toLocaleDateString()} - Page 1 of 1`, pdfWidth / 2, pdfHeight - 10, { align: 'center' });
                
                pdf.save(`${filename}.pdf`);
                showNotification("PDF downloaded successfully!");
                
            }).catch(error => {
                console.error("Error generating PDF:", error);
                showNotification("Failed to generate PDF. Please try again.", "error");
            });
        }
        
        // Form validation
        function validateForm(templateId) {
            const form = document.getElementById('template-form');
            if (!form) return true;
            
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    field.classList.add('error');
                    
                    // Create or update error message
                    let errorMessage = field.nextElementSibling;
                    if (!errorMessage || !errorMessage.classList.contains('form-error')) {
                        errorMessage = document.createElement('div');
                        errorMessage.className = 'form-error';
                        field.parentNode.insertBefore(errorMessage, field.nextSibling);
                    }
                    errorMessage.textContent = 'This field is required';
                } else {
                    field.classList.remove('error');
                    const errorMessage = field.nextElementSibling;
                    if (errorMessage && errorMessage.classList.contains('form-error')) {
                        errorMessage.remove();
                    }
                }
            });
            
            return isValid;
        }
        
        // Add required attributes to important form fields
        function addValidationAttributes() {
            const form = document.getElementById('template-form');
            if (!form) return;
            
            const templateId = form.getAttribute('data-template');
            if (!templateId) return;
            
            // Add required attribute to primary fields based on template type
            switch (templateId) {
                case 'bug-report-template':
                    document.getElementById('bugId')?.setAttribute('required', '');
                    document.getElementById('description')?.setAttribute('required', '');
                    document.getElementById('stepsToReproduce')?.setAttribute('required', '');
                    break;
                case 'launch-checklist':
                    document.getElementById('projectName')?.setAttribute('required', '');
                    document.getElementById('launchDate')?.setAttribute('required', '');
                    break;
                case 'test-strategy-framework':
                    document.getElementById('projectName')?.setAttribute('required', '');
                    document.getElementById('businessRisks')?.setAttribute('required', '');
                    break;
            }
        }
        
        // Function for showing notification
        function showNotification(message, type = "success") {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }
        
        // Call validation setup when template form is generated
        const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                if (mutation.type === 'childList' && mutation.target.id === 'template-form') {
                    addValidationAttributes();
                }
            });
        });
        
        const templateForm = document.getElementById('template-form');
        if (templateForm) {
            observer.observe(templateForm, { childList: true });
        }
        
        // Load saved templates on page load
        if (typeof loadSavedTemplates === 'function') {
            loadSavedTemplates();
        }
        
        // Toggle preview sections
        document.querySelectorAll('.toggle-preview').forEach(button => {
            button.addEventListener('click', function() {
                const previewId = this.getAttribute('data-id');
                const preview = document.getElementById(previewId);
                
                if (preview.classList.contains('expanded')) {
                    preview.classList.remove('expanded');
                    this.textContent = 'Show More';
                } else {
                    preview.classList.add('expanded');
                    this.textContent = 'Show Less';
                }
            });
        });
        
        // Handle UI/UX tabs
        document.querySelectorAll('.uiux-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const contentId = this.getAttribute('data-content');
                
                // Update active tab
                document.querySelectorAll('.uiux-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Show selected content
                document.querySelectorAll('.uiux-content').forEach(content => content.classList.remove('active'));
                document.getElementById(contentId).classList.add('active');
            });
        });
        
        // Handle responsive view buttons
        document.querySelectorAll('.responsive-button').forEach(button => {
            button.addEventListener('click', function() {
                const viewId = this.getAttribute('data-view');
                
                // Update active button
                document.querySelectorAll('.responsive-button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Show selected view
                document.querySelectorAll('.responsive-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${viewId}-view`).classList.add('active');
            });
        });
        
        // Handle category filtering
        document.querySelectorAll('.category-button').forEach(button => {
            button.addEventListener('click', function() {
                const category = this.getAttribute('data-category');
                
                // Update active button
                document.querySelectorAll('.category-button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Show selected categories
                if (category === 'all') {
                    document.querySelectorAll('.resource-category').forEach(section => section.style.display = 'block');
                } else {
                    document.querySelectorAll('.resource-category').forEach(section => {
                        if (section.getAttribute('data-category') === category) {
                            section.style.display = 'block';
                        } else {
                            section.style.display = 'none';
                        }
                    });
                }
            });
        });
        
        // Handle search functionality
        const searchForm = document.querySelector('.search-form');
        const searchInput = document.getElementById('search-input');
        
        if (searchForm && searchInput) {
            searchForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                if (!searchTerm) {
                    // Reset search
                    document.querySelectorAll('.resource-card').forEach(card => card.style.display = 'block');
                    document.querySelectorAll('.resource-category').forEach(section => section.style.display = 'block');
                    return;
                }
                
                // Search through cards
                let anyResults = false;
                document.querySelectorAll('.resource-card').forEach(card => {
                    const title = card.querySelector('.resource-title')?.textContent.toLowerCase() || '';
                    const description = card.querySelector('.resource-description')?.textContent.toLowerCase() || '';
                    const tags = Array.from(card.querySelectorAll('.resource-tag')).map(tag => tag.textContent.toLowerCase());
                    const content = card.querySelector('.resource-preview')?.textContent.toLowerCase() || '';
                    
                    if (title.includes(searchTerm) || 
                        description.includes(searchTerm) || 
                        tags.some(tag => tag.includes(searchTerm)) || 
                        content.includes(searchTerm)) {
                        card.style.display = 'block';
                        anyResults = true;
                    } else {
                        card.style.display = 'none';
                    }
                });
                
                // Show only categories with results
                document.querySelectorAll('.resource-category').forEach(section => {
                    const visibleCards = section.querySelectorAll('.resource-card[style="display: block"]').length;
                    section.style.display = visibleCards > 0 ? 'block' : 'none';
                });
                
                // Show no results message
                if (!anyResults) {
                    // Display a message for no results
                    showNotification('No matching resources found. Try a different search term.', 'warning');
                }
            });
        }
        
        // Theme toggle functionality
        const themeToggle = document.querySelector('.theme-toggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', function() {
                const html = document.documentElement;
                const currentTheme = html.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                html.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
            });
            
            // Set initial theme based on user preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
            }
        }

        // Modal functionality
        const closeModalBtn = document.getElementById('close-modal');
        const templateModal = document.getElementById('template-modal');
        
        if (closeModalBtn && templateModal) {
            closeModalBtn.addEventListener('click', function() {
                templateModal.classList.remove('show');
                document.body.style.overflow = '';
            });
        }
        
        // Open modal when clicking a template button
        document.querySelectorAll('.resource-button[data-template]').forEach(button => {
            button.addEventListener('click', function() {
                const templateId = this.getAttribute('data-template');
                
                // Set the template title
                const templateTitle = this.closest('.resource-card').querySelector('.resource-title').textContent;
                document.getElementById('template-title').textContent = templateTitle;
                
                // Load template structure (this would be handled by qa-toolkit-specific.js)
                // This is just a placeholder for the demonstration
                if (typeof loadTemplateStructure === 'function') {
                    loadTemplateStructure(templateId);
                } else {
                    // Fallback if function doesn't exist
                    document.getElementById('template-structure').textContent = 
                        "Template structure loading is handled by the main JS files.\n\n" +
                        "This function demonstrates how the HTML and styling has been updated.";
                }
                
                // Set the template ID for the form
                document.getElementById('template-form').setAttribute('data-template', templateId);
                
                // Show the modal
                templateModal.classList.add('show');
                document.body.style.overflow = 'hidden';
                
                // Reset tabs to first tab
                document.querySelectorAll('.tab-button').forEach(tab => tab.classList.remove('active'));
                document.getElementById('structure-tab').classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById('structure-content').classList.add('active');
            });
        });
        
        // Tab navigation
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', function() {
                const tabId = this.id.replace('-tab', '');
                
                // Update active button
                document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                // Show selected content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabId}-content`).classList.add('active');
            });
        });
        
        // Next buttons
        document.getElementById('next-structure').addEventListener('click', function() {
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById('content-tab').classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById('content-content').classList.add('active');
        });
        
        document.getElementById('next-content').addEventListener('click', function() {
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.getElementById('output-tab').classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById('output-content').classList.add('active');
        });

        // Add smooth scroll for anchors
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Additional animation effects
        function addIntersectionObserver() {
            if ('IntersectionObserver' in window) {
                const options = {
                    root: null,
                    rootMargin: '0px',
                    threshold: 0.1
                };
                
                const observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animated-in');
                            observer.unobserve(entry.target);
                        }
                    });
                }, options);
                
                // Observe feature cards for animation
                document.querySelectorAll('.feature-card').forEach(card => {
                    card.classList.add('animate-on-scroll');
                    observer.observe(card);
                });
            }
        }
        
        // Initialize animations if supported
        if ('IntersectionObserver' in window) {
            addIntersectionObserver();
        }

        // Copy button functionality
        document.getElementById('copy-output')?.addEventListener('click', function() {
            const output = document.getElementById('template-output');
            if (!output) return;
            
            const text = output.textContent;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text)
                    .then(() => {
                        showNotification('Copied to clipboard!');
                        
                        // Change button text temporarily
                        const originalText = this.innerHTML;
                        this.innerHTML = `
                            <svg class="action-button-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Copied!
                        `;
                        
                        setTimeout(() => {
                            this.innerHTML = originalText;
                        }, 2000);
                    })
                    .catch(err => {
                        console.error('Failed to copy: ', err);
                        showNotification('Failed to copy to clipboard', 'error');
                    });
            } else {
                // Fallback for browsers without clipboard API
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                document.body.appendChild(textarea);
                textarea.focus();
                textarea.select();
                
                try {
                    const successful = document.execCommand('copy');
                    if (successful) {
                        showNotification('Copied to clipboard!');
                    } else {
                        showNotification('Failed to copy to clipboard', 'error');
                    }
                } catch (err) {
                    console.error('Failed to copy: ', err);
                    showNotification('Failed to copy to clipboard', 'error');
                }
                
                document.body.removeChild(textarea);
            }
        });
    });
    </script>
</body>
</html>